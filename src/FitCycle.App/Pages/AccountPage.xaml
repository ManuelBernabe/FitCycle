<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FitCycle.App.Pages.AccountPage"
             Title="Mi Cuenta">

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="12" MaximumWidthRequest="600">

            <Button x:Name="BackBtn" Text="&#x2190; Volver a Rutinas"
                    FontSize="13" Padding="10,6"
                    BackgroundColor="Transparent" TextColor="#512BD4"
                    HorizontalOptions="Start"
                    Clicked="OnBackClicked" />

            <!-- Account info card -->
            <Frame x:Name="AccountCard" Padding="16">
                <VerticalStackLayout Spacing="8">
                    <HorizontalStackLayout Spacing="12">
                        <Frame WidthRequest="48" HeightRequest="48"
                               CornerRadius="24" BackgroundColor="#512BD4" Padding="0"
                               HorizontalOptions="Center" VerticalOptions="Center">
                            <Label x:Name="AvatarLabel" TextColor="White" FontSize="20"
                                   FontAttributes="Bold" HorizontalTextAlignment="Center"
                                   VerticalTextAlignment="Center" />
                        </Frame>
                        <VerticalStackLayout Spacing="2" VerticalOptions="Center">
                            <Label x:Name="UsernameLabel" FontSize="16" FontAttributes="Bold" />
                            <Label x:Name="EmailLabel" FontSize="12" TextColor="Gray" />
                            <Label x:Name="RoleLabel" FontSize="12" TextColor="#512BD4" FontAttributes="Italic" />
                        </VerticalStackLayout>
                    </HorizontalStackLayout>
                    <Button x:Name="EditProfileBtn" Text="Editar Perfil" FontSize="12" Padding="10,4"
                            BackgroundColor="Transparent" TextColor="#512BD4"
                            HorizontalOptions="Start"
                            Clicked="OnEditProfileClicked" />
                </VerticalStackLayout>
            </Frame>

            <!-- User management section (Superuser only) -->
            <VerticalStackLayout x:Name="AdminSection" IsVisible="False" Spacing="10">
                <BoxView HeightRequest="1" Color="LightGray" Margin="0,4" />
                <Label x:Name="AdminTitle" Text="Gesti&#243;n de Usuarios" FontSize="18" FontAttributes="Bold" />

                <Button x:Name="CreateUserBtn" Text="+ Crear Usuario"
                        FontSize="13" Padding="12,6"
                        BackgroundColor="#512BD4" TextColor="White"
                        Clicked="OnCreateUserClicked" />

                <VerticalStackLayout x:Name="UsersContainer" Spacing="8" />
            </VerticalStackLayout>

            <BoxView HeightRequest="1" Color="LightGray" Margin="0,4" />
            <HorizontalStackLayout Spacing="8" VerticalOptions="Center">
                <Label x:Name="LanguageLabel" FontSize="15" FontAttributes="Bold" VerticalOptions="Center" />
                <Picker x:Name="LanguagePicker" WidthRequest="150" FontSize="14"
                        SelectedIndexChanged="OnLanguageChanged" />
            </HorizontalStackLayout>

            <BoxView HeightRequest="1" Color="LightGray" Margin="0,4" />

            <Button x:Name="LogoutBtn" Text="Cerrar Sesi&#243;n"
                    FontSize="13" Padding="14,8"
                    BackgroundColor="#dc3545" TextColor="White"
                    Clicked="OnLogoutClicked"
                    HorizontalOptions="Start"
                    CornerRadius="6" />

            <Label x:Name="StatusLbl" TextColor="Gray" FontSize="13" />
        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
